"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[9590],{5787:(e,t,s)=>{s.r(t),s.d(t,{default:()=>m});var a=s(6540),n=s(1656),i=s(8478),o=s(6347),r=s(4586),c=s(1312),l=s(6239),d=s(4848);const h=()=>{const[e,t]=(0,a.useState)(!1),[s,n]=(0,a.useState)([]),[h,m]=(0,a.useState)(""),[u,g]=(0,a.useState)(!1),b=(0,o.zy)(),{siteConfig:x}=(0,r.A)(),{currentLanguage:p}=(0,l.o)(),j=()=>{t(!e)},y=()=>{t(!1)},f=async e=>{if(e.preventDefault(),!h.trim()||u)return;const t=h.trim();m("");const a=[...s,{id:Date.now(),text:t,sender:"user"}];n(a),g(!0);try{const e=localStorage.getItem("token");if(!e){const e=(0,c.T)({id:"chatbot.loginRequired",message:"You need to log in to use the chatbot. Please go to the login page."});return n(t=>[...t,{id:Date.now()+1,text:e,sender:"system"}]),void g(!1)}const s=await fetch("/api/chat/query",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({query:t,language:p})});if(s.ok){const e=await s.json();n(t=>[...t,{id:Date.now()+1,text:e.response,sender:"bot"}])}else{if(401!==s.status)throw new Error(`API error: ${s.status}`);{localStorage.removeItem("token");const e=(0,c.T)({id:"chatbot.authExpired",message:"Your session has expired. Please log in again."});n(t=>[...t,{id:Date.now()+1,text:e,sender:"system"}])}}}catch(i){console.error("Chatbot error:",i);const e=(0,c.T)({id:"chatbot.errorMessage",message:"Sorry, I encountered an error. Please try again."});n(t=>[...t,{id:Date.now()+1,text:e,sender:"system"}])}finally{g(!1)}};return(0,a.useEffect)(()=>{(b.pathname.includes("/login")||b.pathname.includes("/signup"))&&t(!1)},[b]),(0,d.jsx)(i.A,{children:()=>!b.pathname.includes("/login")&&!b.pathname.includes("/signup")?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"floating-chatbot-icon "+(e?"hidden":""),onClick:j,title:(0,c.T)({id:"chatbot.openTitle",message:"Open AI Assistant"}),children:"\ud83e\udd16"}),e&&(0,d.jsxs)("div",{className:"chatbot-container",children:[(0,d.jsxs)("div",{className:"chatbot-header",children:[(0,d.jsx)("h3",{children:(0,c.T)({id:"chatbot.title",message:"AI Assistant"})}),(0,d.jsx)("button",{className:"chatbot-close",onClick:y,"aria-label":(0,c.T)({id:"chatbot.closeAria",message:"Close chat"}),children:"\xd7"})]}),(0,d.jsxs)("div",{className:"chatbot-messages",children:[0===s.length?(0,d.jsx)("div",{className:"chatbot-welcome",children:(0,c.T)({id:"chatbot.welcome",message:"Hello! I'm your AI assistant. Ask me anything about the Physical AI & Humanoid Robotics book."})}):s.map(e=>(0,d.jsx)("div",{className:`chatbot-message ${e.sender}-message`,children:(0,d.jsx)("div",{className:"message-content",children:e.text})},e.id)),u&&(0,d.jsx)("div",{className:"chatbot-message bot-message",children:(0,d.jsxs)("div",{className:"message-content typing-indicator",children:[(0,d.jsx)("span",{}),(0,d.jsx)("span",{}),(0,d.jsx)("span",{})]})})]}),(0,d.jsxs)("form",{className:"chatbot-input",onSubmit:f,children:[(0,d.jsx)("input",{type:"text",value:h,onChange:e=>m(e.target.value),placeholder:(0,c.T)({id:"chatbot.inputPlaceholder",message:"Ask a question..."}),disabled:u}),(0,d.jsx)("button",{type:"submit",disabled:!h.trim()||u,children:(0,c.T)({id:"chatbot.sendButton",message:"Send"})})]})]})]}):null})};function m(e){return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.A,{...e}),(0,d.jsx)(h,{})]})}},8478:(e,t,s)=>{s.d(t,{A:()=>i});s(6540);var a=s(2303),n=s(4848);function i({children:e,fallback:t}){return(0,a.A)()?(0,n.jsx)(n.Fragment,{children:e?.()}):t??null}}}]);
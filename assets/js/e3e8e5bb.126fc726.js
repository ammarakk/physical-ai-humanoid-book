"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[7522],{1053:(e,s,t)=>{t.r(s),t.d(s,{default:()=>l});var a=t(6540),n=t(6347),o=t(1656),i=t(4586),c=t(6239),r=t(4848);const l=()=>{const[e,s]=(0,a.useState)([]),[t,l]=(0,a.useState)(""),[d,h]=(0,a.useState)(!1),[u,m]=(0,a.useState)(null),g=(0,a.useRef)(null),{siteConfig:b}=(0,i.A)(),x=(0,n.W6)(),{currentLanguage:j}=(0,c.o)(),[v,p]=(0,a.useState)(!1);(0,a.useEffect)(()=>{localStorage.getItem("token")?p(!0):x.push("/login")},[x]);(0,a.useEffect)(()=>{g.current?.scrollIntoView({behavior:"smooth"})},[e]);const y=async()=>{if(!t.trim()||d)return;const a=t.trim();l("");const n=[...e,{id:Date.now(),text:a,sender:"user"}];s(n),h(!0);try{const e=localStorage.getItem("token");if(!e)return void x.push("/login");const t=await fetch("/api/chat/query",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({query:a,language:j})});if(!t.ok){if(401===t.status)return localStorage.removeItem("token"),void x.push("/login");throw new Error(`API error: ${t.status}`)}{const e=await t.json();s(s=>[...s,{id:Date.now()+1,text:e.response,sender:"bot"}])}}catch(o){m("Sorry, I encountered an error. Please try again."),console.error("Chat error:",o)}finally{h(!1)}};return v?(0,r.jsx)(o.A,{title:"AI Chatbot",description:"Ask questions about the Physical AI & Humanoid Robotics book",children:(0,r.jsx)("main",{className:"chatbot-page",children:(0,r.jsx)("div",{className:"container padding-vert--lg",children:(0,r.jsx)("div",{className:"row",children:(0,r.jsx)("div",{className:"col col--12",children:(0,r.jsxs)("div",{className:"chatbot-interface-full",children:[(0,r.jsx)("div",{className:"chatbot-header",children:(0,r.jsxs)("div",{className:"chatbot-header-content",children:[(0,r.jsx)("h2",{children:"AI Assistant for Physical AI & Humanoid Robotics"}),(0,r.jsx)("button",{onClick:()=>{s([]),m(null)},className:"clear-button",children:"Clear Chat"})]})}),(0,r.jsxs)("div",{className:"chatbot-messages",children:[u&&(0,r.jsx)("div",{className:"chatbot-message system-message",children:(0,r.jsx)("div",{className:"message-content",children:u})}),0===e.length?(0,r.jsx)("div",{className:"chatbot-welcome",children:"Welcome! I'm your AI assistant for the Physical AI & Humanoid Robotics book. Ask me anything about the content."}):e.map(e=>(0,r.jsx)("div",{className:`chatbot-message ${e.sender}-message`,children:(0,r.jsx)("div",{className:"message-content",children:e.text})},e.id)),d&&(0,r.jsx)("div",{className:"chatbot-message bot-message",children:(0,r.jsx)("div",{className:"message-content",children:(0,r.jsxs)("div",{className:"typing-indicator",children:[(0,r.jsx)("span",{}),(0,r.jsx)("span",{}),(0,r.jsx)("span",{})]})})}),(0,r.jsx)("div",{ref:g})]}),(0,r.jsxs)("div",{className:"chatbot-input",children:[(0,r.jsx)("input",{type:"text",value:t,onChange:e=>l(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),y())},placeholder:"Ask a question about the book...",disabled:d}),(0,r.jsx)("button",{onClick:y,disabled:d,children:d?"Sending...":"Send"})]})]})})})})})}):(0,r.jsx)(n.rd,{to:"/login"})}}}]);